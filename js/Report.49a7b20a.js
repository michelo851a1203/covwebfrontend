(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Report"],{"2aee":function(e,t,r){var a=r("8b47");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=r("499e").default;n("04164026",a,!0,{sourceMap:!1,shadowMode:!1})},"56c4":function(e,t,r){"use strict";r("ab98")},8465:function(e,t,r){"use strict";r.r(t);var a=r("7a23"),n=Object(a["K"])("data-v-8a1f64f4");Object(a["t"])("data-v-8a1f64f4");var s={class:"reportContent py-12 sm:mt-12 sm:shadow-2xl sm:rounded mx-auto sm:bg-white"},i=Object(a["i"])("div",{class:"flex items-center px-6 py-4"},[Object(a["i"])("div",null,[Object(a["i"])("svg",{class:"boardloading stroke-current text-green-600",width:"100",viewBox:"0 0 100 100"},[Object(a["i"])("circle",{cx:"50",cy:"50",r:"25","stroke-dasharray":"157","stroke-dashoffset":"0","stroke-linecap":"round","stroke-width":"10",fill:"transparent"})])]),Object(a["i"])("div",{class:"ml-10"},"loading...")],-1);Object(a["r"])();var c=n((function(e,t){return Object(a["q"])(),Object(a["f"])("div",s,[(Object(a["q"])(),Object(a["f"])(a["b"],null,{default:n((function(){return[(Object(a["q"])(),Object(a["f"])(Object(a["y"])(e.showTypeRef)))]})),fallback:n((function(){return[i]})),_:1}))])})),o=r("5530"),u=r("b0af"),l=r("11d3"),d=(r("b64b"),r("d3b7"),r("ddb0"),Object(a["K"])("data-v-fd17bf06"));Object(a["t"])("data-v-fd17bf06");var f={class:"flex flex-col sm:flex-row items-center sm:justify-around"},b={class:"order-2 sm:order-1 my-10 sm:py-2"},p={class:"text-sm"},v={class:"text-left px-3 py-1"},m={class:"text-left text-blue-400 px-3 py-1"},g={class:"order-1 sm:order-2"},j={key:0,class:"text-center"},O=Object(a["i"])("label",{for:""},"VC test report will be sent to",-1),h={class:"text-blue-400"},x={key:1,class:"w-full mt-10 mb-2 flex justify-around"};Object(a["r"])();var w=d((function(e,t){var r=Object(a["x"])("genqrcode");return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["i"])("section",f,[Object(a["i"])("div",b,[Object(a["i"])("table",p,[(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["w"])(Object.keys(e.report.credential.values),(function(t){return Object(a["q"])(),Object(a["f"])("tr",{key:t},[Object(a["i"])("th",v,Object(a["A"])(t),1),Object(a["i"])("td",m,Object(a["A"])(e.report.credential.values[t]),1)])})),128))])]),Object(a["i"])("div",g,[""!==e.report._id?Object(a["i"])(r,{key:0,qrStr:e.report._id,width:"200",height:"200"},null,8,["qrStr"]):Object(a["g"])("",!0)])]),3===e.reportRole?(Object(a["q"])(),Object(a["f"])("section",j,[O,Object(a["i"])("label",h,Object(a["A"])(e.report.displayName),1)])):Object(a["g"])("",!0),3===e.reportRole?(Object(a["q"])(),Object(a["f"])("section",x,[Object(a["i"])("button",{onClick:t[1]||(t[1]=function(){return e.backtoRecord.apply(e,arguments)}),class:"w-1/3 bg-gray-700 focus:outline-none hover:bg-gray-900 text-white font-medium py-2 px-4 rounded"},"Back"),Object(a["i"])("button",{onClick:t[2]||(t[2]=function(){return e.sendMailFunc.apply(e,arguments)}),class:"w-1/3 bg-green-700 focus:outline-none hover:bg-green-900 text-white font-medium py-2 px-4 rounded"},"Confirm")])):Object(a["g"])("",!0)])})),k=(r("96cf"),r("1da1")),y=r("7b08"),R=r("c5a9"),C=r("a18c"),I={name:"components",components:{genqrcode:y["a"]},setup:function(){return Object(k["a"])(regeneratorRuntime.mark((function e(){var t,r,n,s,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Object(u["a"])(),r=Object(R["a"])(),t.regainLoginUser()||C["a"].push({name:"signIn"}),n=Object(a["v"])(-1),n.value=t.userData.role,s=Object.keys(r.report.credential.values),0===s.length&&3===n.value&&C["a"].push("/"),1!==n.value){e.next=10;break}return e.next=10,r.getUserDetail();case 10:return i=function(){C["a"].push("/")},c=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.sendMailApi();case 2:t=e.sent,a=t.success,a&&C["a"].push("/");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",Object(o["a"])(Object(o["a"])({},r),{},{backtoRecord:i,reportRole:n,sendMailFunc:c}));case 13:case"end":return e.stop()}}),e)})))()}};r("89e0");I.render=w,I.__scopeId="data-v-fd17bf06";var q=I,A=r("399c"),D={name:"report",components:{reportlist:q,scanqrcode:A["a"]},setup:function(){var e=Object(u["a"])(),t=Object(l["a"])({initial:"reportlist",role:1});return e.regainLoginUser()||C["a"].push({name:"signIn"}),Object(o["a"])({},t)}};r("56c4");D.render=c,D.__scopeId="data-v-8a1f64f4";t["default"]=D},"89e0":function(e,t,r){"use strict";r("2aee")},"8b47":function(e,t,r){var a=r("24fb");t=a(!1),t.push([e.i,"",""]),e.exports=t},ab98:function(e,t,r){var a=r("ee38");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=r("499e").default;n("d47b9466",a,!0,{sourceMap:!1,shadowMode:!1})},c5a9:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));r("4160"),r("d81d"),r("b0c0"),r("b64b"),r("d3b7"),r("159b"),r("ddb0"),r("96cf");var a=r("1da1"),n=r("7a23"),s=r("af53"),i=r("59cc"),c=r("5628"),o=r("2abf"),u=r("bba8");function l(){var e=Object(n["v"])({title:"",status:""}),t=Object(n["d"])((function(){if(0===o["a"].attributes.length)return[];var e=o["a"].attributes.map((function(e){return{id:s["a"].uuid(),title:e}}));return e})),r=Object(n["v"])({"Test Result":""}),l=Object(n["v"])(""),d=Object(n["v"])(!1),f=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(""!==o["a"].name&&o["a"].attributes.length>0)){e.next=3;break}return console.error("no credentialData.attributes or credentialData.name"),e.abrupt("return",!1);case 3:return e.next=5,i["a"].getCredentialDetail();case 5:if(t=e.sent,t&&t.success){e.next=9;break}return console.error("getCredentialDetail error"),e.abrupt("return",!1);case 9:return r=t.data,o["a"].name=r.name,o["a"].version=r.version,o["a"].definitionId=r.definitionId,o["a"].schemaId=r.schemaId,o["a"].supportsRevocation=r.supportsRevocation,o["a"].attributes=r.attributes,e.abrupt("return",!0);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){Object.keys(r.value).forEach((function(e){r.value[e]=""})),r.value["Test Result"]=""},p=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==l.value){t.next=3;break}return console.error("sendToUserEmails is empty"),t.abrupt("return",{success:!1,msg:"User email required"});case 3:if(""!==o["a"].definitionId){t.next=6;break}return console.error("definitionId is empty"),t.abrupt("return",{success:!1,msg:"Not acquire definitionId"});case 6:if(r.value["Test Result"]&&""!==r.value["Test Result"]){t.next=8;break}return t.abrupt("return",{success:!1,msg:"Pease choose Test Result"});case 8:if(0!==Object.keys(r.value).length){t.next=11;break}return console.error("issueData is empty"),t.abrupt("return",{success:!1,msg:"Not fill content"});case 11:if(s["a"].validateEmail(l.value)){t.next=14;break}return console.error("sendEmail is error"),t.abrupt("return",{success:!1,msg:"Error email format"});case 14:if(d.value){t.next=17;break}return console.error("not accept to send"),t.abrupt("return",{success:!1,msg:"Please check <Above Information is correct>"});case 17:return o["a"].attributes.forEach((function(e){r.value[e]||(r.value[e]="")})),e.value.title="Loading...",e.value.status="loading",t.next=22,i["a"].sendCredential(l.value,o["a"].definitionId,r.value);case 22:if(a=t.sent,a&&a.success){t.next=26;break}return console.error("getCredentialDetail error"),t.abrupt("return",{success:!1,msg:"請求返回失敗"});case 26:return n=a.data,c["a"].displayName=n.displayName,c["a"].role=n.role,c["a"].updatedAt=n.updatedAt,c["a"].username=n.username,c["a"].wallet=n.wallet,c["a"]._id=n._id,c["a"].credential=n.credential,t.abrupt("return",{success:!0,msg:"Request failure"});case 35:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),v=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].sendMail(c["a"].credential._id);case 2:if(t=e.sent,t&&t.success){e.next=6;break}return console.error("sendMail error"),e.abrupt("return",{success:!1});case 6:return e.abrupt("return",{success:!0});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].getUserCredential();case 2:if(t=e.sent,t&&t.success){e.next=6;break}return console.error("getUserDetail error"),e.abrupt("return",!1);case 6:r=t.data,c["a"].updatedAt=r.updatedAt,c["a"]._id=r._id,c["a"].credential.values=r.values,u["a"].value="genQrcode";case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){e.value.title="",e.value.status=""},j=function(t){var r=t.title,a=t.status;e.value.title=r,e.value.status=a,setTimeout((function(){e.value.title="",e.value.status=""}),1500)},O=function(){c["a"].displayName="",c["a"].role="",c["a"].updatedAt="",c["a"].username="",c["a"].wallet="",c["a"]._id="",c["a"].credential={createdAt:-1,credentialId:"",definitionId:"",schemaId:"",state:"",updatedAt:"",values:{}}};return{navTag:u["a"],currentCredStatus:e,report:c["a"],credentialData:o["a"],attr:t,issueData:r,sendToUserEmail:l,lock:d,getCredDefinition:f,sendIssue:p,refillRecord:b,sendMailApi:v,getUserDetail:m,closeCredentialAlert:g,normalCredentialAlert:j,clearCredentialReport:O}}},d81d:function(e,t,r){"use strict";var a=r("23e7"),n=r("b727").map,s=r("1dde"),i=r("ae40"),c=s("map"),o=i("map");a({target:"Array",proto:!0,forced:!c||!o},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},ee38:function(e,t,r){var a=r("24fb");t=a(!1),t.push([e.i,".reportContent[data-v-8a1f64f4]{min-height:30vh;width:100%}@media only screen and (min-width:640px){.reportContent[data-v-8a1f64f4]{width:50%}}@media only screen and (min-width:1400px){.reportContent[data-v-8a1f64f4]{width:40%}}@keyframes Loading-8a1f64f4{0%{stroke-dashoffset:0}75%{stroke-dashoffset:250}to{stroke-dashoffset:314}}@keyframes rotate-8a1f64f4{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.boardloading[data-v-8a1f64f4]{-webkit-animation:rotate-8a1f64f4 .6s linear infinite;animation:rotate-8a1f64f4 .6s linear infinite}.boardloading circle[data-v-8a1f64f4]{-webkit-animation:Loading-8a1f64f4 2.4s linear infinite;animation:Loading-8a1f64f4 2.4s linear infinite}",""]),e.exports=t}}]);
//# sourceMappingURL=Report.49a7b20a.js.map